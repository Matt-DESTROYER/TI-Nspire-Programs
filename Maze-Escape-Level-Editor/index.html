<!DOCTYPE html>
<html lang="en-au">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>TI-Nspire Programs - Maze Escape Level Editor</title>
	<link rel="icon" type="image/png" href="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/calculator-icon.png" />
	<link rel="stylesheet" type="text/css" href="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/CSS/default.css" />
	<link rel="stylesheet" type="text/css" href="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/CSS/maze-escape-level-editor.css" />
	<style>
		nav h1 button {
			background-color: skyblue;
			border: solid 2px;
			border-color: deepskyblue;
			border-radius: 8px;
			padding: 7px;
			padding-top: 10px;
			padding-bottom: 10px;
		}
		
		nav h1 button:hover {
			background-color: deepskyblue;
			border-color: dodgerblue;
			cursor: pointer;
		}
		
		nav h1 button:active {
			background-color: dodgerblue;
			border-color: blue;
		}
	</style>
	<script type="module" src="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/Maze-Escape-Level-Editor/scripts.mjs" defer></script>
</head>

<body>
	<nav>
		<h1><img src="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/calculator-icon.png" width="32" height="32"></img> TI-Nspire Programs - Maze Escape Level Editor&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/"><button>Home</button></a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://Matt-DESTROYER.github.io/TI-Nspire-Programs/Maze-Escape-Level-Editor/Published-Levels"><button>Published Levels</button></a></h1>
	</nav>
	<div style="background-color: lightgray;border-radius: 8px;padding: 10px;padding-left: 20px;padding-right: 20px;">
		<h2>Note:</h2>
		<p>A level must have one (no more and no less) player spawn, and a level must have at least one level finish. It must be possible to navigate from the player spawn to a level finish.</p>
		<p>Once your level is completed, click "Generate Level Data" (which will automatically copy the level data), and paste it into an email <a href="mailto:mattdestroyerpro@gmail.com?subject=TI-Nspire Maze Escape Level">here</a>. You can also email a nickname which will be added to the credits if your level is used.</p>
	</div>
	<br>
	<div style="background-color: lightgray;border-radius: 8px;padding: 10px;padding-left: 20px;padding-right: 20px;">
		<nav>
			<button id="reset">Reset</button>
			<label for="tool">&nbsp;&nbsp;&nbsp;Tool:&nbsp;</label>
			<select id="tool" selected="Solid Wall">
				<option value="Air">Air</option>
				<option value="Solid Wall" selected>Solid Wall</option>
				<option value="Player Spawn">Player Spawn</option>
				<option value="Level Finish">Level Finish</option>
			</select>
			<button id="generate">Generate Level Data</button>
		</nav>
		<br>
		<canvas id="screen"></canvas>
	</div>
</body>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getFirestore, collection, doc, addDoc, setDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

const firebaseConfig = {
	apiKey: "AIzaSyAYc2AtdxlSEkD_VrGaIiKjOv0B3xD7uSs",
	authDomain: "ti-nspire-programs-database.firebaseapp.com",
	projectId: "ti-nspire-programs-database",
	storageBucket: "ti-nspire-programs-database.appspot.com",
	messagingSenderId: "1026879731613",
	appId: "1:1026879731613:web:45cdecd4e9ed5dc57ba174"
};

const app = initializeApp(firebaseConfig);

const db = getFirestore();
	
	async function CreateDocument(collectionName, documentName, object) {
	try {
		if (documentName) {
			return await setDoc(doc(db, collectionName, documentName), object);
		} else {
			return await addDoc(collection(db, collectionName), object);
		}
	} catch (err) {
		console.error("Error writing to database:", err);
		return err;
	}
}
	
	await CreateDocument("Levels", null, {
	"levelName": "Level2",
	"author": "Matthew James",
	"levelData": ["##########",
		"#@#      #",
		"# # #### #",
		"#    # # #",
		"# # ##   #",
		"# #    # #",
		"# # ######",
		"# #   # *#",
		"#   #   ##",
		"##########"]
});
	await CreateDocument("Levels", null, {
	"levelName": "Level3",
	"author": "Matthew James",
	"levelData": ["####################",
		"#@#   #   # #      #",
		"# # ### # # ####   #",
		"#       #          #",
		"# ### # ####### #  #",
		"#  #  # #     # #  #",
		"#### ## ####  # # ##",
		"#    #  #* # ## #  #",
		"#  #    #       #  #",
		"####################"]
});
	await CreateDocument("Levels", null, {
	"levelName": "Level4",
	"author": "Matthew James",
	"levelData": ["####################",
		"#@# #              #",
		"# # ### ##### ######",
		"#           # #    #",
		"# ##### ##### #### #",
		"#       # #        #",
		"### ##### # ##### ##",
		"#       #   #      #",
		"# ### ######### ####",
		"#  #  #            #",
		"# ### # ### ###### #",
		"#     #   #   #    #",
		"# ####### ##########",
		"# #       #        #",
		"# ### ########### ##",
		"###   #            #",
		"# # # # ### ########",
		"# # # # #     #    #",
		"#   #   # #     # *#",
		"####################"]
});
	await CreateDocument("Levels", null, {
	"levelName": "Level5",
	"author": "Matthew James",
	"levelData": ["#############################",
		"#@          #     #   #     #",
		"# ##### # ### ###   ### #####",
		"# #   # # #   #   #         #",
		"# # # ### ### ### ###########",
		"#   # #     #               #",
		"# ### # ### ##### ### ### # #",
		"#   #     #     # # # # # # #",
		"### ####### ### # # # # ### #",
		"#     #   # #       #       #",
		"### ##### ### ####### # #####",
		"# #   #       #     # # #   #",
		"# # ### # ### ### # ### # ###",
		"#     # # #     # #   #     #",
		"# ####### # ##### ### ##### #",
		"#         # #       #       #",
		"##### ##### # ### ### ### ###",
		"#     #     # #   #     #  *#",
		"#############################"]
});
	await CreateDocument("Levels", null, {
	"levelName": "Level6",
	"author": "Matthew James",
	"levelData": ["###############################",
		"#@        #         #     #   #",
		"# ### ### # ####### # ### # # #",
		"# #   #   #     #       #   # #",
		"# ### ### ##### ############# #",
		"#   #   #       #       #     #",
		"# # ### ### ### ### ### # #####",
		"# #     #   #     #   #   #   #",
		"# ##### # # ### ### ####### ###",
		"# #     # #         #       # #",
		"# # ### # ######### # # ##### #",
		"#   #       #         #       #",
		"# # ###### ## # ### ##### #####",
		"# #         # # # #     #     #",
		"# ######### ### # ### # ##### #",
		"#       #             #     # #",
		"####### # # # ############# # #",
		"#   #   # # #   #   #   #   # #",
		"# #   #   # # #   #   #   # #*#",
		"###############################"]
});
	await CreateDocument("Levels", null, {
	"levelName": "Level7",
	"author": "Matthew James",
	"levelData": ["###############################",
		"#@#                           #",
		"# # ####### ##### ######### # #",
		"# # #     # #   # #       # # #",
		"# # ##### # # # ### ####### # #",
		"#   #     # #   # # #       # #",
		"### # # # # ##### # ### #######",
		"#   # # # #     #             #",
		"# ### # # # # ### ##### ##### #",
		"# #   # # # # #   # # #     # #",
		"# # ### # # # # ### # ### # # #",
		"# #   # # # ###     #     # # #",
		"# ##### ### # ### ##### # #####",
		"#           #     #     #     #",
		"# ##### ### ### ##### # ##### #",
		"# #   #       #             # #",
		"# # # ##### # ## ########## # #",
		"# # # #   ###  #      #   # ###",
		"#   #   #      #    #   # #  *#",
		"###############################"]
});
	await CreateDocument("Levels", null, {
	"levelName": "Level8",
	"author": "Matthew James",
	"levelData": ["###############################",
		"#@                            #",
		"# #     #  ###  ##### ####### #",
		"# ##   ## #   #    #  #       #",
		"# # # # # #####   #   ####### #",
		"# #  #  # #   #  #    #       #",
		"# #     # #   # ##### ####### #",
		"#                             #",
		"# # ####### ####### ### ### ###",
		"# # #   # # # # # # # # # # # #",
		"# # # # # # #   # # # ### # # #",
		"### # # # #   # # # # #   # # #",
		"# # # # # ##### # # # # # # # #",
		"#     #   #         #   #     #",
		"### ##### ########### #########",
		"#     #           #           #",
		"### ### ####### # ######### ###",
		"# # #         # #   #     ###*#",
		"#   # #  #  #   # #   #       #",
		"###############################"]
});
</script>

</html>
